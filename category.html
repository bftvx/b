<!DOCTYPE html>
<html>
<head>
<title>Category</title>
</head>
<body>

<h1 id="title"></h1>
<div id="videos"></div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycby9cU8_IZyMN6dYYjP9mEXc0h1nq5DLupUc9D6WGJhyDx6djj2gKb4yhoq6mU9wLBb5/exec";
const params = new URLSearchParams(window.location.search);
const CATEGORY = params.get("name");

document.getElementById("title").innerText = CATEGORY;

async function loadVideos() {
  const res = await fetch(`${API_URL}?category=${CATEGORY}`);
  const data = await res.json();
  render(data);
}

function render(data) {
  const box = document.getElementById("videos");
  box.innerHTML = "";
  data.forEach(([url,title]) => {
    box.innerHTML += `
      <iframe src="${url}" width="300" height="180"></iframe>
      <p>${title}</p>
    `;
  });
}

loadVideos();
</script>

</body>
</html>
